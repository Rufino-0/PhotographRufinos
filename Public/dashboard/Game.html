<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photograph | Quiz</title>
    <link rel="stylesheet" href="gameExperiente.css">
    <script src="../js/sessao.js"></script>
</head>

<body>
    <nav id="navbar">
        <a onclick="limparSessao()" href="../dashboard/dashSite.html"><img id="logo" src="../assets/index/LogoBlack.png"
                alt="LogoBlack"></a>
        <ul>
            <li class="dropdown"><a>Fotografia</a>

                <div class="dropdown-menu">
                    <a href="../paginas/Objetos.html">Objetos</a>
                    <a href="../paginas/Pessoaa.html">Pessoas</a>
                    <a href="../paginas/paisagem.html">Paisagens</a>
                </div>
            </li>

            <li class="dropdown2"> <a>Games</a>

                <div class="dropdown-menu2">
                    <a href="../dashboard/Game.html">Quiz iniciante</a>
                    <a href="../dashboard/GameExperiente.html">Quiz experiente</a>

                </div>

            </li>

            <li class="dropdown3"> <a>Info</a>

                <div class="dropdown-menu3">
                    <a href="../dashboard/metricas.html">Metricas</a>
                </div>
            </li>
        </ul>
        <button onclick=" limparSessao()"><img id="exit" src="../assets/dash/exit.png" alt=""></button>
    </nav>

    <!-- Incio do quiz iniciante com 10 questões -->

    <div class="geral">

        <!-- mostrando o cronometro do jogo -->

        <h1 id="cronometro">00.00</h1>

        <!-- div inicial que faz a primeira interação com o cliente  -->

        <div id="content" class="content">
            <h3>Quiz - Fotografia Iniciante</h3>

            <p>Bem vindo! ao nosso Quiz
                <br>
                entre e descubra se você sabe sobre fotografia, respire fundo, ajuste suas configurações e esteja pronto
                para jogar nosso game.
                Que cada resposta certa seja um flash de sucesso e que cada erro seja apenas uma nova oportunidade de
                aprendizado. Estamos ansiosos para ver suas pontuações.
            </p>

            <button class="resposta-btn" onclick="entrada()">Jogar!</button>

        </div>

        <!-- todas as divs abaixo estão em ordem de 1 a 10 -->
         <!-- as questões abaixo usam a mesma função de responder porem as falsas tem o parametro 'false' e as certas 'true' -->

        <div id="content1" class="content1">
            <h3>1° - Questão</h3>


            <p> Qual é a abertura máxima de uma câmera DSLR típica? <br><br>
            </p>


            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">f/5.6</button>
                <button class="resposta-btn " onclick="responder(false)">f/11</button>
                <button class="resposta-btn" onclick="responder(true)">f/2.8</button>
            </div>
        </div>
        <div id="content2" class="content2">
            <h3>2° - Questão</h3>


            <p>Qual destes não é um tipo comum de lente fotográfica?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Grande Angular</button>
                <button class="resposta-btn" onclick="responder(true)">Pixel</button>
                <button class="resposta-btn " onclick="responder(false)">Teleobjetiva</button>
                <button class="resposta-btn " onclick="responder(false)">Macro</button>
            </div>
        </div>
        <div id="content3" class="content3">
            <h3>3° - Questão</h3>


            <p>O que faz o obturador em uma câmera?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Controla a quantidade de luz que entra na
                    câmera</button>
                <button class="resposta-btn " onclick="responder(false)">Controla a nitidez da imagem</button>
                <button class="resposta-btn " onclick="responder(false)">Controla a cor da imagem</button>
                <button class="resposta-btn" onclick="responder(true)">Controla a velocidade do obturador</button>
            </div>
        </div>
        <div id="content4" class="content4">
            <h3>4° - Questão</h3>


            <p>Qual é a função do ISO em uma câmera?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Controlar a velocidade do obturador</button>
                <button class="resposta-btn " onclick="responder(false)">Controlar a abertura do diafragma</button>
                <button class="resposta-btn " onclick="responder(false)">Controlar o zoom da lente</button>
                <button class="resposta-btn" onclick="responder(true)">Controlar a sensibilidade do sensor à
                    luz</button>
            </div>
        </div>
        <div id="content5" class="content5">
            <h3>5° - Questão</h3>


            <p>O que é o foco automático em uma câmera?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Um tipo de lente que permite zoom
                    automático</button>
                <button class="resposta-btn " onclick="responder(false)">Um tipo de câmera que ajusta automaticamente a
                    abertura do diafragma</button>
                <button class="resposta-btn" onclick="responder(true)">Um recurso que ajusta automaticamente o foco da
                    imagem</button>
                <button class="resposta-btn " onclick="responder(false)">Um modo de disparo que ajusta automaticamente a
                    velocidade do obturador</button>
            </div>
        </div>
        <div id="content6" class="content6">
            <h3>6° - Questão</h3>

            <p>Qual é a função do diafragma em uma câmera?</p>

            <div class="respostas">
                <button class="resposta-btn" onclick="responder(true)">Controlar a profundidade de campo</button>
                <button class="resposta-btn " onclick="responder(false)">Controlar a sensibilidade do sensor à
                    luz</button>
                <button class="resposta-btn " onclick="responder(false)">Controlar a velocidade do obturador</button>
                <button class="resposta-btn " onclick="responder(false)">Controlar a nitidez da imagem</button>
            </div>
        </div>
        <div id="content7" class="content7">
            <h3>7° - Questão</h3>

            <p>Qual é a principal diferença entre fotografia em preto e branco e fotografia em cores?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Fotografia em cores tem mais detalhes</button>
                <button class="resposta-btn" onclick="responder(true)">Fotografia em preto e branco não utiliza
                    cores</button>
                <button class="resposta-btn " onclick="responder(false)">Fotografia em preto e branco é mais
                    antiga</button>
                <button class="resposta-btn " onclick="responder(false)">Fotografia em preto e branco é mais
                    barata</button>
            </div>
        </div>
        <div id="content8" class="content8">
            <h3>8° - Questão</h3>

            <p>O que é o "formato RAW" em fotografia digital?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Um formato de imagem com compressão com
                    perdas</button>
                <button class="resposta-btn " onclick="responder(false)">Um formato de imagem com compressão sem
                    perdas</button>
                <button class="resposta-btn" onclick="responder(true)">Um formato de imagem que inclui todos os dados do
                    sensor</button>
                <button class="resposta-btn " onclick="responder(false)">Um formato de imagem que só pode ser editado em
                    preto
                    e branco</button>
            </div>
        </div>
        <div id="content9" class="content9">
            <h3>9° - Questão</h3>

            <p>O que é o "modo manual" em uma câmera?</p>

            <div class="respostas">
                <button class="resposta-btn " onclick="responder(false)">Um modo que ajusta automaticamente todas as
                    configurações da câmera</button>
                <button class="resposta-btn " onclick="responder(false)">Um modo que só permite a captura de fotografias
                    em
                    preto e branco</button>
                <button class="resposta-btn" onclick="responder(true)">Um modo que permite ao fotógrafo ajustar
                    manualmente as
                    configurações da câmera</button>
                <button class="resposta-btn " onclick="responder(false)">Um modo que captura automaticamente imagens
                    panorâmicas</button>
            </div>
            <button id="finalizar-btn" style="display: none;" onclick="finalizar()">Finalizar</button>

        </div>
        <div id="content10" class="content10">
            <h3>10° - Questão</h3>

            <p>Qual é a função do visor em uma câmera?</p>

            <div class="respostas">
                <button class="resposta-btn" onclick="responder(true)">Permitir que o fotógrafo enxergue a cena antes de
                    capturar a imagem</button>
                <button class="resposta-btn " onclick="responder(false)">Conectar a câmera a dispositivos externos para
                    compartilhamento de imagens</button>
                <button class="resposta-btn " onclick="responder(false)">Controlar a exposição da imagem em tempo
                    real</button>
                <button class="resposta-btn " onclick="responder(false)">Mostrar a imagem capturada após a foto ter sido
                    tirada</button>
            </div>
       
        </div>

</body>
<script>

    // vetor que vai fazer o armazenamento de todos os dados do quiz

    const resultado = {
        acerto: [],
        erros: [],
        tempoFinalizado: []
    };

    // função que inicia a contagem do cronometro, e exibe as questões para que o usuario possa usar  

    function entrada() {

        content.style.display = "none"
        content1.style.display = "flex"
        rodar()
        intervalo = setInterval(rodar, 1000)

    };

    // declarando as variaveis que serão usadas no cronometro 

    let min = '00';
    let hr = 0;
    let sec = 0;
    let intervalo

    // função que roda o cronometro, usando uma logico simples de contagem de segundos, minutos 

    function rodar() {
        sec++
        if (sec == 60) {
            min++
            sec = 0
            if (min == 60) {
                min = 0
                sec = 0
            }
        }

        // aqui vai pegar o conteudo com o id cronometro e vai fazer a manipulação para mostrar os números contando 

        document.getElementById('cronometro').innerHTML = `${min}.${sec}`
    }

    // Logica para exibir as perguntas do quiz, e para quando o usuario responder, vai mudar o conteudo do conteudo que está sendo exibido, para o proximo conteudo
    let ax = 1;

    // declarando a a variavel q vai ser usada para conferir os paramentros 
    function responder(resposta) {

        // lógica para poder mudar o conteudo do conteudo que está sendo exibido, para o proximo conteudo
        let proxima = ax + 1;

        // pegando as divs das perguntas para poder fazer o jogo de display none e flex, usando as variaveis ax e proxima para tornar dinâmico 
        let perguntaAtual = document.getElementById(`content${ax}`);
        let proximaPergunta = document.getElementById(`content${proxima}`);

        // validando as respostas certas e erradas e inserindo no vetor
    
        if (resposta == true) {
            resultado.acerto.push(1)

            console.log("acertos = " + resultado.acerto.length)
        } else if (resposta == false) {
            resultado.erros.push(1)

            console.log("erros = " + resultado.erros.length)
        }
        // quando  a variavel proxima for = 11 o cronometro vai parar e ser inserido no vetor, e vai voltar para a tela de entrada

        if (proxima == 11) {
            clearInterval(intervalo)
            content.style.display = "flex"
            resultado.tempoFinalizado.push(document.getElementById('cronometro').innerText)
            document.getElementById('cronometro').innerText = '00:00'
            ax = 1
            registrar()
        }
        perguntaAtual.style.display = "none"
        proximaPergunta.style.display = "flex"
        ax++
    }

    function registrar() {

        // fazendo a multiplicação para ver a quantidade de pontos do usuario

        let qntPontos = resultado.acerto.length * 10;

        // pegando o id do usuario  no session storage para usar no fetch para registrar o score
        let idUsuario = sessionStorage.ID_USUARIO;

        // fazendo a requisição para o servidor para registrar o score
        fetch("/score/registrarIniciante", {

            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },


            // reatribuindo as variaveis e mandando elas para um json, e assim poder usar nas outras partes de inserção de dados
            body: JSON.stringify({

                idUsuario: idUsuario,
                pontos: qntPontos,
                acertos: resultado.acerto.length,
                erros: resultado.erros.length,
                tempo: resultado.tempoFinalizado[0]

            }),

        }).then(response => {

            // validações para ver se funcionou ou não a inserção dos dados

            if (response.ok) {

                console.log('Resultados registrados com sucesso!');

            } else {

                console.error('Erro ao registrar os dados.');

            }

        }).catch(error => {

            console.error('Erro ao enviar a requisição:', error);

        });
    }

</script>

</html>